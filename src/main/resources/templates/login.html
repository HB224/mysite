<!DOCTYPE html  >
<!-- saved from url=(0023)http://vnr.aniclan.com/ -->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html“; charset=”UTF-8">
		<title></title>
		
		
		<link rel="stylesheet" th:href="@{/index_files/styles.css}">
		<link rel="stylesheet" th:href="@{/index_files/bootstrap.min.css}">
		<link th:href="@{/index_files/noty.css}" rel="stylesheet">
		<script th:src="@{/index_files/jquery.js}" type="text/javascript"></script>
		<script th:src="@{/index_files/bootstrap.min.js}"></script>
		<script th:src="@{/index_files/noty.min.js}" type="text/javascript"></script>
		<script th:src="@{/index_files/scripts.js}" type="text/javascript"></script>
		


<script>
    //经过测试，这两段代码无用
/*function registration(){
	var html = '<div class="block big">'+
					'<h3>Create Account</h3>'+
					'<div class="fomochka">'+
						'<form>'+
							'<div><label>Username*</label> <input type="text" name="name" id="name" required></div>'+
							'<div><label>E-mail*</label> <input type="email" name="email" id="email" required></div>'+
							'<div><label>Password*</label> <input type="password" name="password1" id="password1" required></div>'+
							'<div><label>Confirm password*</label> <input type="password" name="password2" id="password2" required></div>'+
							'<div><label>Sakuradite.com username</label> <input type="text" name="sakura" id="sakura"> <a href="#" title="Insert your username from Sakuradite.com to verify an account">[?]</a></div>'+
							'<div class="buttons"><a href="#" id="registration_submit">Submit</a> <a href="#" class="closeModal">Close</a></div>'+
						'</form>'+
					'</div>'+
				'</div>';
	openModal(html);
	
	$("#registration_submit").click(function(){
		$("#reg_form").submit();
	});

	return false;
}
function auth(){
	var html = '<div class="block big">'+
					'<h3>Sign In</h3>'+
					'<div class="fomochka">'+
						'<form id="auth_form" action="/user/login">'+
							'<div><label>Username</label> <input type="text" name="username" id="name" required></div>'+
							'<div><label>Password</label> <input type="password" name="password" id="password" required></div>'+
							'<div class="buttons"><a href="#" id="auth">Sign in</a> <a href="#" class="closeModal">Close</a></div>'+
						'</form>'+
					'</div>'+
				'</div>';
	openModal(html);
	$("#auth").click(function(){
		$("#auth_form").submit();
	});
}*/
$(function(){
	/*
	<option value="alert">alert</option>
      <option value="success">success</option>
      <option value="warning">warning</option>
      <option value="error">error</option>
      <option value="information">information</option>
	new Noty({
        text: 'Мы запущены!',
        type: 'error',
        timeout: 5000,
        layout: 'topRight'
      }).show();*/
	$('#myModal').on('shown.bs.modal', function (e) {
	  $('.modal-dialog').animate({'margin-top':($(window).height()-$('.modal-dialog').height())/2},500);
	});
	$('#registration').click(function () {
		$("#myModal .modal-body").html('<form id="reg_form" class="form-horizontal">'+
										  '<div class="form-group">'+
											'<label for="inputName" class="col-xs-4 control-label">Username:</label>'+
											'<div class="col-xs-8">'+
											  '<input type="text" class="form-control" id="inputName" placeholder="Enter username..." required>'+
											'</div>'+
										  '</div>'+
										  '<div class="form-group">'+
											'<label for="inputEmail" class="col-xs-4 control-label">E-mail:</label>'+
											'<div class="col-xs-8">'+
											  '<input type="email" class="form-control" id="inputEmail" placeholder="Enter E-mail..." required>'+
											'</div>'+
										  '</div>'+
										  '<div class="form-group">'+
											'<label for="inputPassword" class="col-xs-4 control-label">Password:</label>'+
											'<div class="col-xs-8">'+
											  '<input type="password" class="form-control" id="inputPassword" placeholder="Enter password..." required>'+
											'</div>'+
										  '</div>'+
										  '<div class="form-group">'+
											'<label for="inputPassword2" class="col-xs-4 control-label">Confirm password:</label>'+
											'<div class="col-xs-8">'+
											  '<input type="password" class="form-control" id="inputPassword2" placeholder="Confirm password..." required>'+
											'</div>'+
										  '</div>'+
										  /*'<div class="form-group">'+
											'<label class="col-xs-4 control-label">Was registered on Sakuradite.com:</label>'+
											  '<div class="col-xs-8">'+
												  '<div class="btn-group" id="future_buttons" data-toggle="buttons">'+
													  '<label class="btn btn-primary active">'+
														'<input type="radio" name="options" id="option1" value="no"> No'+
													  '</label>'+
													  '<label class="btn btn-primary">'+
														'<input type="radio" name="options" id="option2" value="yes"> Yes'+
													  '</label>'+
												  '</div>'+
											  '</div>'+
										  '</div>'+*/
										  '<div class="form-group" old-rega style="display:none;">'+
											'<label for="inputSakura" class="col-xs-4 control-label">Sakuradite.com username:</label>'+
											'<div class="col-xs-8">'+
											  '<input type="text" class="form-control" id="inputSakura" placeholder="Enter Sakuradite username...">'+
											'</div>'+
										  '</div>'+
										 /* '<div class="form-group" new-rega>'+
											'<label for="inputLang" class="col-xs-4 control-label">Language:</label>'+
											'<div class="col-xs-8">'+
											  '<select class="form-control" id="inputLang">'+
												'<option value="">Выберите язык</option>'+
												'<option value="en">Английский</option>'+
												'<option value="ru">Русский</option>'+
												'<option value="ja">Японский</option>'+
												'<option value="zht">Китайский</option>'+
												'<option value="zhs">Упрощенный китайский</option>'+
												'<option value="ko">Корейский</option>'+
												'<option value="vi">Вьетнамский</option>'+
												'<option value="tl">Тагальский</option>'+
												'<option value="id">Индонезийский</option>'+
												'<option value="ms">Малазийский</option>'+
												'<option value="th">Тайский</option>'+
												'<option value="he">Иврит</option>'+
												'<option value="ar">Арабский</option>'+
												'<option value="cs">Чешский</option>'+
												'<option value="da">Датский</option>'+
												'<option value="de">Немецкий</option>'+
												'<option value="el">Греческий</option>'+
												'<option value="es">Испанский</option>'+
												'<option value="et">Эстонский</option>'+
												'<option value="fi">Финский</option>'+
												'<option value="fr">Французкий</option>'+
												'<option value="hu">Венгерский</option>'+
												'<option value="it">Итальянский</option>'+
												'<option value="lt">Литовский</option>'+
												'<option value="lv">Латышский</option>'+
												'<option value="nl">Голландский</option>'+
												'<option value="no">Норвежский</option>'+
												'<option value="pl">Польский</option>'+
												'<option value="pt">Португальский</option>'+
												'<option value="ro">Румынский</option>'+
												'<option value="sl">Словенский</option>'+
												'<option value="sk">Словацкий</option>'+
												'<option value="sv">Шведский</option>'+
												'<option value="tr">Турецкий</option>'+
												'<option value="bg">Болгарский</option>'+
												'<option value="be">Белорусский</option>'+
												'<option value="uk">Украинский</option>'+
											  '</select>'+
											'</div>'+
										  '</div>'+*/
										  '<div class="form-group">'+
											'<div class="col-xs-offset-4 col-xs-8">'+
											  '<button type="submit" class="btn btn-default">Submit</button>'+
											'</div>'+
										  '</div>'+
										'</form>');

		$("#myModalLabel").text('Create Account');
		$('#myModal').modal('show');
		
		$("#future_buttons").click(function(){
			if($(this).find("input").val()=="no"){
				$("[old-rega]").fadeOut(300);
				setTimeout(function(){$("[new-rega]").fadeIn(300);},300);
			}else{
				$("[new-rega]").fadeOut(300);
				setTimeout(function(){$("[old-rega]").fadeIn(300);},300);
			}
		});
		
		$("#reg_form").submit(function(){
			var name = $("#inputName").val();
			var email = $("#inputEmail").val();
			var password1 = $("#inputPassword").val();
			var password2 = $("#inputPassword2").val();
			var sakura = $("#inputSakura").val();
			var lang = $("#inputLang").val();
			
			var errors ='';
			if(name=="" || email=="" || password1=="" || password2=="") errors = 'Please fill all the mandatory fields!';
			if(password1.length<6) errors = 'Password must be at least 6 characters long';
			if(password1!=password2) errors = 'Passwords don\'t match';
			if($("#future_buttons.active input").val()=='no' && lang=="") errors = 'Choose your language'; else
			if($("#future_buttons.active input").val()=='yes' && sakura=="") errors = 'Enter your old username';
			if(errors!=''){
				new Noty({
					text: errors,//自己更改的
					type: 'error',
					timeout: 10000,
					layout: 'topRight'
				  }).show();
				return false;
			}
			$.post("/user/register",{username:name,email:email,password:password1},function(data) {
                if (data.code == 1) {
                    new Noty({
                        text: 'Registration is finished successfully, you can login in now',
                        type: 'success',
                        timeout: 5000,
                        layout: 'topRight'
                    }).show();
                    $('#myModal').modal('hide');
                    setTimeout(function () {
                        auth();
                    }, 2000);
                } else if(data.code == 0){//https://blog.csdn.net/zhulin2012/article/details/102815104?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162453228016780274150556%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=162453228016780274150556&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_v2~rank_v29-2-102815104.first_rank_v2_pc_rank_v29&utm_term=+%40PostMapping%28%22%2Fuser%2Fregister%22%29&spm=1018.2226.3001.4187
                    new Noty({
                        text: data.error,
                        type: 'error',
                        timeout: 5000,
                        layout: 'topRight'
                    }).show();
                }
			},'json');
			
			return false;
		});
		
		return false;
	});


















    $('#auth').click(auth);
    function auth(){//登录模块
        $("#myModal .modal-body").html('<form id="auth_form"  class="form-horizontal">'+
            '<div class="form-group">'+
            '<label for="inputName" class="col-xs-4 control-label">Username:</label>'+
            '<div class="col-xs-8">'+
            '<input type="text" class="form-control" id="inputName" name="Email" placeholder="Enter username..." required>'+
            '</div>'+
            '</div>'+
            '<div class="form-group">'+
            '<label for="inputPassword" class="col-xs-4 control-label">Password:</label>'+
            '<div class="col-xs-8">'+
            '<input type="password" class="form-control" id="inputPassword"  name="password" placeholder="Enter password..." required>'+
            '</div>'+
            '</div>'+
            '<div class="form-group">'+
            '<div class="col-xs-offset-4 col-xs-8">'+
            '<button type="submit" class="btn btn-default">Sign in</button>'+
            '</div>'+
            '</div>'+
            '</form>');
        $("#myModalLabel").text('Sign In');
        $('#myModal').modal('show');
        $("#auth_form").submit(function(){
            var name = $("#inputName").val();
            var password = $("#inputPassword").val();

            $.post("/user/login",{username:name,password:password},function(data) {
                if (data.code == 1) {
                    //不能用这个history.go(-1);
                    window.location.href=data.url;
                } else if(data.code == 0){
                    new Noty({
                        text: data.message,
                        type: 'error',
                        timeout: 5000,
                        layout: 'topRight'
                    }).show();
                }
            },'json');

            return false;
        });
        return false;
    }
});
</script>



	<input type="hidden" id="_w_tusk"><script type="text/javascript" src="chrome-extension://dbjbempljhcmhlfpfacalomonjpalpko/scripts/inspector.js"></script></head>
	<body>
		
		
<div class="content_main">
	<div class="form"><ul class="buttons"><li><a href="javascript:;" id="auth">Sign In</a></li><li><a href="javascript:;" id="registration">Create Account</a></li></ul></div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="inline:left;">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Header-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>

            <!-- Body -->
            <div class="modal-body">

            </div>
        </div>
    </div>
</div>
		
	
</body>
</html>